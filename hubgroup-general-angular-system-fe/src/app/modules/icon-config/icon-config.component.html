<div class='card card-bordered'>
    <div class='card-header'>
        <div class='card-title m-0'>
            {{ 'icon.config.list.title' | translate }}
        </div>

        <div class="card-toolbar">
            <app-news-button-add [permissionKey]="'IconConfig/Insert'"
                                 [keenIconClass]="responsive.isDesktop ? 'fs-4' : 'fs-5'"
                                 (clickFunc)='onOpenInsertOrUpdateModal()'
                                 [text]="'Add'|translate">
            </app-news-button-add>
        </div>
    </div>
    <div class='card-body'>
        @if (message) {
            <nz-alert class="mb-1" nzType='error' [nzMessage]='message' nzDescription='' nzShowIcon></nz-alert>
        }
        <form nz-form [nzLayout]="'horizontal'" class="position-relative" (ngSubmit)="onSearch()">
            <div nz-row [nzGutter]="30">
                <div nz-col [nzSpan]="24" [nzMd]="24/2" [nzXl]="24/3" [nzXXl]="24/3 - 1">
                    <nz-form-item>
                        <nz-form-control>
                            <nz-input-group [nzAddOnBefore]="'Keyword'|translate">
                                <input nz-input [name]="'keyword'" [autofocus]="responsive.isDesktop"
                                       [placeholder]="'Keyword'|translate"
                                       type="search"
                                       [(ngModel)]="requestSearch.title" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="24" [nzMd]="24/2" [nzXl]="24/3" [nzXXl]="24/3 - 1">
                    <nz-form-item>
                        <nz-form-control>
                            <nz-input-group [nzAddOnBefore]="'icon.type'|translate">
                                <nz-select nzShowSearch [(ngModel)]="requestSearch.type"
                                           [nzPlaceHolder]="'icon.type'|translate"
                                           [name]="'requestSearch.type'">
                                    @for (item of iconTypeSources; track item.id) {
                                        <nz-option [nzLabel]="('icon.type.' + item.text) | lowercase | translate"
                                                   [nzValue]="item.value"></nz-option>
                                    }
                                </nz-select>
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="24" [nzMd]="24/2" [nzXl]="24/3" [nzXXl]="3">
                    <div nz-flex [nzWrap]="'wrap'" [nzGap]="'middle'" [nzAlign]="'center'">
                        <app-news-button-search [text]="'Search'|translate"
                                                [buttonType]="'submit'"
                                                [permissionKey]="'IconConfig/Gets'"></app-news-button-search>
                    </div>
                </div>
            </div>
        </form>
        <div class='table-responsive'>
            <nz-table nzBordered #dataTable
                      [nzData]='configSettingModels'
                      [nzPageIndex]='pageIndex + 1'
                      [nzPageSize]='pageSizeServer'
                      [nzSize]="'small'"
                      [nzShowTotal]="responsive.isDesktop ? rangeTemplate : null"
                      [nzTotal]='totalRow'>
                <thead>
                <tr>
                    <th nzAlign="center" nzWidth="50px">{{ 'STT' | translate }}
                    </th>
                    <th>{{ 'icon.title'|translate }}</th>
                    <th>{{ 'icon.image'|translate }}</th>
                    <th>{{ 'table.created.date'|translate }}</th>
                    <th>{{ 'table.created.user'|translate }}</th>
                    <th>{{ 'table.created.status'|translate }}</th>
                    <th nzAlign="center">{{ 'Action'|translate }}</th>
                </tr>
                </thead>
                <tbody>
                    @for (iconConfigSettingModel of dataTable.data; track $index) {
                        <tr>
                            <td [nzAlign]="'center'">{{ pageIndex * pageSize + ($index + 1) }}</td>
                            <td>{{ iconConfigSettingModel.title }}</td>
                            <td>
                                <div class="symbol symbol-75px symbol-2by3">
                                    <div class="symbol-label"
                                         [style]="'background-image:url('+ (iconConfigSettingModel.url || noImage) +')'"></div>
                                </div>
                            </td>
                            <td>
                                {{ iconConfigSettingModel.createdDate | date: dateTimeFormat }}
                            </td>
                            <td>
                                {{ iconConfigSettingModel.createdUid }}
                            </td>
                            <td>
                                {{ (iconConfigSettingModel.status === 1 ? 'Active' : 'InActive') | translate }}
                            </td>
                            <td [nzAlign]="'center'">
                                <app-news-button-change [buttonIcon]="true"
                                                        [permissionKey]="'IconConfig/GetById'"
                                                        (clickFunc)="onOpenInsertOrUpdateModal(iconConfigSettingModel)">
                                </app-news-button-change>
                            </td>
                        </tr>
                    }
                </tbody>
            </nz-table>
            <ng-template #rangeTemplate let-range="range" let-total>
                <div class="me-5">
                    {{ range[0] }}-{{ range[1] }} {{ 'of'| translate }} {{ total }} {{ 'items'|translate }}
                </div>
            </ng-template>
        </div>
    </div>
</div>
